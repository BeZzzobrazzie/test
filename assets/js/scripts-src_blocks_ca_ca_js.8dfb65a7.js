"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkprtf_hotel"] = self["webpackChunkprtf_hotel"] || []).push([["scripts-src_blocks_ca_ca_js"],{

/***/ "./src/blocks/ca/ca.js":
/*!*****************************!*\
  !*** ./src/blocks/ca/ca.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _js_cellular_automaton_ca_controlPanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../js/cellular-automaton/ca-controlPanel */ \"./src/js/cellular-automaton/ca-controlPanel.js\");\n/* harmony import */ var _js_cellular_automaton_ca_root__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../js/cellular-automaton/ca-root */ \"./src/js/cellular-automaton/ca-root.js\");\n\n\n\nlet body = document.querySelector('body');\nbody.onload = function() {\n  let caRoot = new _js_cellular_automaton_ca_root__WEBPACK_IMPORTED_MODULE_1__.CARoot('.ca__canvas');\n  let caControlPanel = new _js_cellular_automaton_ca_controlPanel__WEBPACK_IMPORTED_MODULE_0__.CAControlPanel(caRoot);\n\n\n}\n\n//# sourceURL=webpack://prtf_hotel/./src/blocks/ca/ca.js?");

/***/ }),

/***/ "./src/js/cellular-automaton/ca-apple.js":
/*!***********************************************!*\
  !*** ./src/js/cellular-automaton/ca-apple.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CAApple: () => (/* binding */ CAApple)\n/* harmony export */ });\n/* harmony import */ var _ca_entity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ca-entity */ \"./src/js/cellular-automaton/ca-entity.js\");\n\n\n\nclass CAApple extends _ca_entity__WEBPACK_IMPORTED_MODULE_0__.CAEntity {\n  constructor(step, cWidth, cHeight, ctx, main, color) {\n    super(step, cWidth, cHeight, ctx, main, color);\n    this.type = 'apples';\n    this.create(color);\n  }\n\n}\n\n//# sourceURL=webpack://prtf_hotel/./src/js/cellular-automaton/ca-apple.js?");

/***/ }),

/***/ "./src/js/cellular-automaton/ca-controlPanel.js":
/*!******************************************************!*\
  !*** ./src/js/cellular-automaton/ca-controlPanel.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CAControlPanel: () => (/* binding */ CAControlPanel)\n/* harmony export */ });\nclass CAControlPanel {\n  constructor(main) {\n    this.main = main;\n\n    this.btnPreviousStep = document.querySelector('.btn-previous-step');\n    this.btnPlayPause = document.querySelector('.btn-play-pause');\n    this.btnNextStep = document.querySelector('.btn-next-step');\n    this.btnReset = document.querySelector('.btn-reset');\n    this.rangeDelay = document.querySelector('.range-delay');\n\n    this.btnPreviousStep.addEventListener('click', this);\n    this.btnPlayPause.addEventListener('click', this);\n    this.btnNextStep.addEventListener('click', this);\n    this.btnReset.addEventListener('click', this);\n    this.rangeDelay.addEventListener('change', this);\n  }\n\n  handleEvent(event) {\n    //console.log(event);\n    if (event.target.classList.contains('btn-previous-step')) {\n      console.log(event.target);\n    }\n    else if (event.target.classList.contains('btn-play-pause')) {\n      if (!this.main.timerStatus) {\n        this.main.startTimer(this.main.delay);\n      }\n      else if (this.main.timerStatus) {\n        this.main.stopTimer();\n      }\n    }\n    else if (event.target.classList.contains('btn-next-step')) {\n      //console.log(event.target);\n      this.main.nextStep();\n    }\n    else if (event.target.classList.contains('btn-reset')) {\n      console.log(event.target);\n    }\n    else if (event.target.classList.contains('range-delay')) {\n      //console.log(this.rangeDelay.value);\n      this.main.delay = this.rangeDelay.value;\n      this.main.stopTimer();\n      this.main.startTimer(this.main.delay);\n\n    }\n  }\n\n\n}\n\n//# sourceURL=webpack://prtf_hotel/./src/js/cellular-automaton/ca-controlPanel.js?");

/***/ }),

/***/ "./src/js/cellular-automaton/ca-creature.js":
/*!**************************************************!*\
  !*** ./src/js/cellular-automaton/ca-creature.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CACreature: () => (/* binding */ CACreature)\n/* harmony export */ });\n/* harmony import */ var _ca_entity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ca-entity */ \"./src/js/cellular-automaton/ca-entity.js\");\n/* harmony import */ var _ca_func__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ca-func */ \"./src/js/cellular-automaton/ca-func.js\");\n\n\n\nclass CACreature extends _ca_entity__WEBPACK_IMPORTED_MODULE_0__.CAEntity {\n  constructor(step, cWidth, cHeight, ctx, main, color) {\n    super(step, cWidth, cHeight, ctx, main, color);\n    this.type = 'creatures';\n    this.create(color);\n  }\n\n  exist() {\n    //let direction = getRandomInt(1, 5);\n    //this.sense();\n    //this.decide();\n\n    console.log(this.color + ' ' + this.enegry);\n    this.enegry -= 1;\n    if(this.enegry <= 0) {\n      this.die();\n      return;\n    }\n    this.decide();\n\n  }\n\n  decide() {\n    //console.log(this);\n    let view = this.sense();\n    if (this.enegry >= 50) {\n      if(this.reproduce(view)) {\n        return;\n      }\n    }\n    for (let key in view) {\n      if (view[key] == 'apples') {\n        //console.log('direction: ' + key + ' value: ' + view[key]);\n        this.eat(key);\n        return;\n      }\n    }\n    this.go((0,_ca_func__WEBPACK_IMPORTED_MODULE_1__.convertIntToDirection)((0,_ca_func__WEBPACK_IMPORTED_MODULE_1__.getRandomInt)(1, 5)));\n\n  }\n\n  sense() {\n    function senseDir(direction, parrent) {\n      if (parrent.currentCell[direction] !== null && parrent.currentCell[direction].obj !== null) {\n        return parrent.currentCell[direction].obj.type;\n      }\n      else {\n        return null;\n      }\n    }\n    let up;\n    let right;\n    let bottom;\n    let left;\n    \n    up = senseDir('up', this);\n    right = senseDir('right', this);\n    bottom = senseDir('bottom', this);\n    left = senseDir('left', this);\n\n\n    //console.log({up: up, right: right, bottom: bottom, left: left});\n    return {up: up, right: right, bottom: bottom, left: left};\n  }\n\n  \n\n  eat(direction) {\n    if (this.currentCell[direction].obj.type == 'apples') {\n      this.enegry += 10;\n      this.currentCell[direction].obj.die();\n      this.go(direction);\n\n    }\n\n  }\n\n  sleep() {\n\n  }\n\n  reproduce(view) {\n    console.log('reproduce');\n\n    let partner = false;\n    let partnerObj;\n    let freeSpace = false;\n    for (let key in view) {\n      if (view[key] === null) {\n        freeSpace = true;\n      }\n      if (view[key] == 'creatures') {\n        partner = true;\n        partnerObj = this.currentCell[key].obj;\n      }\n    }\n\n    if (freeSpace && partner) {\n      new CACreature(this.step, this.cWidth, this.cHeight, this.ctx, this.main, (0,_ca_func__WEBPACK_IMPORTED_MODULE_1__.mixColor)(this.color, partnerObj.color));\n      this.enegry -= 30;\n\n      return true;\n    }\n\n    \n  }\n\n  go(direction) {\n\n    if (this.currentCell[direction] !== null && this.currentCell[direction].obj === null) { \n\n      this.ctx.fillStyle = 'white';\n      this.ctx.fillRect(this.currentCell.x, this.currentCell.y, this.currentCell.size, this.currentCell.size);\n      this.currentCell.obj = null;\n      this.main.listFreeCells[this.currentCell.addressCell] = 1;\n\n      this.ctx.fillStyle = this.color;\n      this.ctx.fillRect(this.currentCell[direction].x, this.currentCell[direction].y, this.currentCell.size, this.currentCell.size);\n      this.currentCell = this.currentCell[direction];\n      this.currentCell.obj = this;\n      delete this.main.listFreeCells[this.currentCell.addressCell];\n      \n    }\n  }\n}\n\n//# sourceURL=webpack://prtf_hotel/./src/js/cellular-automaton/ca-creature.js?");

/***/ }),

/***/ "./src/js/cellular-automaton/ca-entity.js":
/*!************************************************!*\
  !*** ./src/js/cellular-automaton/ca-entity.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CAEntity: () => (/* binding */ CAEntity)\n/* harmony export */ });\n/* harmony import */ var _ca_func__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ca-func */ \"./src/js/cellular-automaton/ca-func.js\");\n\n\nclass CAEntity {\n  constructor(step, cWidth, cHeight, ctx, main, color) {\n    this.step = step;\n    this.currentCell;\n    this.cWidth = cWidth;\n    this.cHeight = cHeight;\n    this.ctx = ctx;\n    this.main = main;\n    this.name;\n    this.type;\n    this.color = color;\n    this.enegry = 30;\n  }\n\n  create(color, cell = -1) {\n    let targetCell;\n    if (cell == -1) {\n      targetCell = (0,_ca_func__WEBPACK_IMPORTED_MODULE_0__.getRandomCell)(this.main.listFreeCells);\n    }\n    else {\n      targetCell = cell;\n    }\n    \n\n    this.currentCell = this.main.cells[targetCell];\n    this.currentCell.obj = this;\n\n    this.name = (0,_ca_func__WEBPACK_IMPORTED_MODULE_0__.getId)(this.main.objects[this.type]);\n    this.main.objects[this.type][this.name] = this;\n\n    \n    this.drawEntity(this.ctx, color, this.currentCell);\n\n  }\n\n  die() {\n    if (this.name in this.main.objects[this.type]) {\n      this.ctx.fillStyle = 'white';\n      this.ctx.fillRect(this.currentCell.x, this.currentCell.y, this.step - 2, this.step - 2);\n      this.currentCell.obj = null;\n      this.main.listFreeCells[this.currentCell.addressCell] = 1;\n      delete this.main.objects[this.type][this.name];\n    }\n  }\n\n  drawEntity(ctx, color, cell) {\n    ctx.fillStyle = color;\n    ctx.fillRect(cell.x, cell.y, this.step - 2, this.step - 2);\n  }\n\n}\n\n//# sourceURL=webpack://prtf_hotel/./src/js/cellular-automaton/ca-entity.js?");

/***/ }),

/***/ "./src/js/cellular-automaton/ca-field.js":
/*!***********************************************!*\
  !*** ./src/js/cellular-automaton/ca-field.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CAField: () => (/* binding */ CAField)\n/* harmony export */ });\n\n\nclass CAField {\n  constructor(cHeight, cWidth, ctx, step, cells, listFreeCells) {\n    this.createLogicField(cHeight, cWidth, step, cells, listFreeCells);\n    this.drawField(cHeight, cWidth, ctx, step);\n  }\n\n  drawField(cHeight, cWidth, ctx, step) {\n    for (let i = 0; i <= cWidth; i = i + step) {\n      ctx.beginPath();\n      ctx.moveTo(i, 0);\n      ctx.lineTo(i, cHeight);\n      ctx.stroke();\n      ctx.closePath();\n    }\n    for (let i = 0; i <= cHeight; i = i + step) {\n      ctx.beginPath();\n      ctx.moveTo(0, i);\n      ctx.lineTo(cWidth, i);\n      ctx.stroke();\n      ctx.closePath();\n    }  \n  }\n\n  createLogicField(cHeight, cWidth, step, cells, listFreeCells) {\n    for (let y = 1, a = 1; y <= cHeight; y = y + step, a++) {\n      for (let x = 1, b = 1; x <= cWidth; x = x + step, b++) {\n        let addressCell = (a - 1) * (cWidth / step) + b;\n        cells[addressCell] = {obj: null, addressCell: addressCell, x: x, y: y, size: step - 2};\n        listFreeCells[addressCell] = 1;\n\n\n\n        // a - строка, b - столбец\n        // a = ceil(addressCell / cWidth)\n        // b = addressCell % cWidth\n        // x = (b - 1) * 20 + 1\n        // y = (a - 1) * 20 + 1\n      }\n    }\n\n    for (let y = 1, a = 1; y <= cHeight; y = y + step, a++) {\n      for (let x = 1, b = 1; x <= cWidth; x = x + step, b++) {\n        let addressCell = (a - 1) * (cWidth / step) + b;\n\n        if (addressCell - cWidth / step <= 0) {\n          cells[addressCell].up = null;\n        }\n        else {\n          cells[addressCell].up = cells[addressCell - cWidth / step];\n        }\n\n        if (addressCell + 1 > cWidth / step * a) {\n          cells[addressCell].right = null;\n        }\n        else {\n          cells[addressCell].right = cells[addressCell + 1];\n        }\n\n        if (addressCell + cWidth / step > cWidth / step * cHeight / step) {\n          cells[addressCell].bottom = null;\n        }\n        else {\n          cells[addressCell].bottom = cells[addressCell + cWidth / step];\n        }\n\n        if (addressCell - 1 <= cWidth / step * a - cWidth / step) {\n          cells[addressCell].left = null;\n        }\n        else {\n          cells[addressCell].left = cells[addressCell - 1];\n        }\n      }\n    }\n\n    // console.log(\"Object cells: \");\n    // console.log(cells);\n  }\n\n}\n\n\n\n//# sourceURL=webpack://prtf_hotel/./src/js/cellular-automaton/ca-field.js?");

/***/ }),

/***/ "./src/js/cellular-automaton/ca-func.js":
/*!**********************************************!*\
  !*** ./src/js/cellular-automaton/ca-func.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertIntToDirection: () => (/* binding */ convertIntToDirection),\n/* harmony export */   getId: () => (/* binding */ getId),\n/* harmony export */   getRandomCell: () => (/* binding */ getRandomCell),\n/* harmony export */   getRandomInt: () => (/* binding */ getRandomInt),\n/* harmony export */   mixColor: () => (/* binding */ mixColor),\n/* harmony export */   randColor: () => (/* binding */ randColor)\n/* harmony export */ });\n\n\n\nfunction getRandomCell(list) {\n  let randomCell = getRandomInt(0, Object.keys(list).length); \n  let value = Object.keys(list)[randomCell];\n  delete list[Object.keys(list)[randomCell]];\n  \n  return value;\n}\n\n\nfunction getRandomInt(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n\n  return Math.floor(Math.random() * (max - min)) + min; //Максимум не включается, минимум включается\n}\n\nfunction convertIntToDirection(number) {\n  switch(number) {\n    case 1:\n      return 'up';\n    case 2:\n      return 'right';\n    case 3:\n      return 'bottom';\n    case 4:\n      return 'left';\n    default:\n      console.log('что то пошло не так');\n  } \n}\n\nfunction getId(collection) {\n  while (true) {\n    let key = getRandomInt(0, 10000);\n    if (!(key in collection)) {\n      return key;\n    }\n  }\n}\n\nfunction randColor() {\n  let r = getRandomInt(0, 256);\n  let g = getRandomInt(0, 256);\n  let b = getRandomInt(0, 256);\n  let color = '#' + r.toString(16) + g.toString(16) + b.toString(16);\n\n  return color;\n}\n\nfunction mixColor(colorOne, colorTwo) {\n  let rOne = parseInt(colorOne.slice(1, 3), 16);\n  let gOne = parseInt(colorOne.slice(3, 5), 16);\n  let bOne = parseInt(colorOne.slice(5), 16);\n\n  let rTwo = parseInt(colorTwo.slice(1, 3), 16);\n  let gTwo = parseInt(colorTwo.slice(3, 5), 16);\n  let bTwo = parseInt(colorTwo.slice(5), 16);\n\n\n  let result = rgb2hex(Math.round((rOne + rTwo) / 2), Math.round((gOne + gTwo) / 2), Math.round((bOne + bTwo) / 2));\n\n  return result;\n}\n\nfunction componentToHex(c) {\n  var hex = c.toString(16);\n  return hex.length == 1 ? \"0\" + hex : hex;\n}\n\nfunction rgb2hex(r, g, b) {\n  return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\n}\n\n//# sourceURL=webpack://prtf_hotel/./src/js/cellular-automaton/ca-func.js?");

/***/ }),

/***/ "./src/js/cellular-automaton/ca-root.js":
/*!**********************************************!*\
  !*** ./src/js/cellular-automaton/ca-root.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CARoot: () => (/* binding */ CARoot)\n/* harmony export */ });\n/* harmony import */ var _ca_field__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ca-field */ \"./src/js/cellular-automaton/ca-field.js\");\n/* harmony import */ var _ca_creature__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ca-creature */ \"./src/js/cellular-automaton/ca-creature.js\");\n/* harmony import */ var _ca_apple__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ca-apple */ \"./src/js/cellular-automaton/ca-apple.js\");\n/* harmony import */ var _ca_func__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ca-func */ \"./src/js/cellular-automaton/ca-func.js\");\n\n\n\n\n\nclass CARoot {\n  constructor(canvasClass) {\n    this.canvas = document.querySelector(canvasClass);\n    this.cHeight = this.canvas.getAttribute('height');\n    this.cWidth = this.canvas.getAttribute('width');\n    this.ctx = this.canvas.getContext('2d');\n    this.step = 20;\n\n    this.cells = {};\n    this.listFreeCells = {};\n    this.objects = {creatures: {}, apples: {},};\n\n    this.timerId;\n    this.timerStatus = false;\n    this.delay = 1000;\n\n    this.canvasField = new _ca_field__WEBPACK_IMPORTED_MODULE_0__.CAField(this.cHeight, this.cWidth, this.ctx, this.step, this.cells, this.listFreeCells);\n    //let i = new CAEntity(this.step, this.cWidth, this.cHeight, this.ctx, this);\n    //i.create('green');\n    console.log(this.listFreeCells);\n\n    for (let index = 0; index < 10; index++) {\n      new _ca_creature__WEBPACK_IMPORTED_MODULE_1__.CACreature(this.step, this.cWidth, this.cHeight, this.ctx, this, (0,_ca_func__WEBPACK_IMPORTED_MODULE_3__.randColor)());\n      new _ca_apple__WEBPACK_IMPORTED_MODULE_2__.CAApple(this.step, this.cWidth, this.cHeight, this.ctx, this, 'orange');\n    }\n\n    // let i = new CACreature(this.step, this.cWidth, this.cHeight, this.ctx, this, '#0000ff');\n    // let b = new CACreature(this.step, this.cWidth, this.cHeight, this.ctx, this, '#ffff00');\n    // let r = new CACreature(this.step, this.cWidth, this.cHeight, this.ctx, this, '#800080');\n\n    //let m = new CAApple(this.step, this.cWidth, this.cHeight, this.ctx, this, 'orange');\n\n\n\n\n  }\n\n  timer(delay) {\n    let thisObj = this;\n    thisObj.timerId = setTimeout(function tick() {\n      for (let key in thisObj.objects.creatures) {\n        thisObj.objects.creatures[key].exist();\n      }\n      for (let index = 0; index < 2; index++) {\n        new _ca_apple__WEBPACK_IMPORTED_MODULE_2__.CAApple(thisObj.step, thisObj.cWidth, thisObj.cHeight, thisObj.ctx, thisObj, 'orange');\n      }\n\n      thisObj.timerId = setTimeout(tick, delay);\n    }, delay, thisObj);\n  }\n\n  startTimer(delay) {\n    if (!this.timerStatus) {\n      this.timerStatus = true;\n      this.timer(delay);\n    }\n  }\n  \n  stopTimer() {\n    if (this.timerStatus) {\n      this.timerStatus = false;\n      clearTimeout(this.timerId);\n    }\n  }\n\n  nextStep() {\n    this.startTimer(0);\n    setTimeout(() => this.stopTimer(), 0);\n  }\n\n\n}\n\n\n\n\n//# sourceURL=webpack://prtf_hotel/./src/js/cellular-automaton/ca-root.js?");

/***/ })

}]);